<h2><a href="/clients">Clients</a> &rarr; Dropbox</h2>
<hr>

<br>
{{#error}}
 <p class="box red" style="width:120%">Blot was unable to connect to your Dropbox. Please try again. <a class="link" href="/contact">Contact me</a> if this error keeps happening.</p>
{{/error}}

{{^account}}

<p style="width:130%;">Blot uses Dropbox to sync your blog. Blot can only access a single folder in your Dropbox. You can revoke Blot's access at any point on Dropbox's settings page.</p><br />
<a href="/clients/dropbox/authenticate/redirect" class="button">Connect to Dropbox</a>

<a href="/clients/dropbox/authenticate/redirect?full=true" class="button">Connect to Dropbox Full Folder</a>

<hr>
<form action="/clients/dropbox/disconnect" method="post">
<input type="hidden" name="_csrf" value="{{csrftoken}}">
<input type="submit" class="button" value="Use a different client">
</form>
{{/account}}

{{#account}}

  {{#valid}}
  <p>Your site is linked to <b>{{email}}</b>'s Dropbox account. Blot had access as of {{last_active}}.<br><br>

  <a href="/clients/dropbox/disconnect" class="button">Disconnect from Dropbox</a>

  <a href="/clients/dropbox/authenticate/redirect" class="button">Use a different Dropbox account</a>

  {{^full}}
  <p>You have granted Blot {{#full}}full{{/full}} access to your Dropbox. Blot can only access the files inside your site's folder at <b>Dropbox/Apps/Blot{{folder}}</b></p>

  {{#blogs.length}}
  <p><a href="/clients/dropbox/change-folder" class="button">Choose a different folder</a></p>
  {{/blogs.length}}
  {{/full}}
  {{/valid}}

  {{^valid}}

    {{#folder_missing}}

      <p>Your folder is missing</p>

      {{#full}}
      <a href="/clients/dropbox/select-folder" class="button">Select a folder</a>
      {{/full}}

      {{^full}}
      <a href="/clients/dropbox/authenticate/redirect" class="button">Create a folder</a>
      {{/full}}

    {{/folder_missing}}

    {{#generic_error}}

    {{/generic_error}}

  {{/valid}}


{{/account}}