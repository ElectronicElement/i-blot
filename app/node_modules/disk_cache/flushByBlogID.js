var flush = require('./flush');
var config = require('config');

module.exports =  function (blogID, callback) {

  var Blog = require('blog');

  callback = callback || function (err) {if (err) throw err;};

  Blog.get({id: blogID}, function(err, blog){

    flush(blog.handle + '.' + config.host, function(err){

      if (!blog.domain) return callback();
      
      flush(blog.domain, callback);
    });
  });
};