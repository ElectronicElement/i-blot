<p>The best way to learn how to use Blot’s template is to clone an existing template and look at its source. Please don’t hestitate to <a href="/contact">contact me</a> if you have any questions.</p>
<h2 id="modify-an-existing-template">Modify an existing template</h2>
<p>To modify an existing template, create a new template on the <a href="/settings/design#create-a-template">design page</a> and specify the template you wish to clone.</p>
<h2 id="debugging">Debugging</h2>
<p>If you append the query string ?json=true to a URL on Blot, you can retrieve the view used to render its template. I’d suggest using a browser extension like JSONView to make more sense of it.</p>
<h2 id="routing">Routing</h2>
<p>When an HTTP request from one of your readers arrives at your site, Blot follows these steps to work out what to send in response. This process is known as <em>routing</em>.</p>
<ol type="1">
<li><p>Check your site’s template to see if there is a route which matches the path. If there is, render the template and send the HTML as a response.</p></li>
<li><p>Check your site’s folder to see if there is a file which matches the path. Send the file as a response if it matches.</p></li>
<li><p>Check your site’s list of redirects to see if you have set one up for this path. If neither, serve an error page.</p></li>
</ol>
<p>You can <a href="https://github.com/davidmerfield/Blot/tree/master/app/blogs">read the source code</a> which defines these steps for a more precise idea of how things work.</p>
<p>{{=[[ ]]=}}</p>
<h2 id="site-variables">Site variables</h2>
<p>Blot uses these variables to render <a href="https://mustache.github.io/">Mustache</a> templates.</p>
<table>
<thead>
<tr class="header">
<th>The tag…</th>
<th>is replaced with…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>{{title}}</code></td>
<td>your site’s title</td>
</tr>
<tr class="even">
<td><code>{{#menu}}...{{/menu}}</code></td>
<td>a list containing the links on your site’s menu</td>
</tr>
<tr class="odd">
<td><code>{{avatar}}</code></td>
<td>the URL to your site’s avatar</td>
</tr>
<tr class="even">
<td><code>{{siteURL}}</code></td>
<td>the URL to your site’s homepage</td>
</tr>
<tr class="odd">
<td><code>{{feedURL}}</code></td>
<td>the URL to your site’s RSS feed</td>
</tr>
<tr class="even">
<td><code>{{cssURL}}</code></td>
<td>the URL to your site’s CSS file</td>
</tr>
<tr class="odd">
<td><code>{{scriptURL}}</code></td>
<td>the URL to your site’s JS file</td>
</tr>
<tr class="even">
<td><code>{{sitemapURL}}</code></td>
<td>the URL to your site’s sitemap</td>
</tr>
<tr class="odd">
<td><code>{{cacheID}}</code></td>
<td>a unix time stamp for the last change you made to your site</td>
</tr>
<tr class="even">
<td><code>{{timeZone}}</code></td>
<td>your site’s timezone</td>
</tr>
<tr class="odd">
<td><code>{{roundAvatar}}</code></td>
<td><code>true</code> if you’ve indicated your avatar is round, <code>false</code> if not</td>
</tr>
<tr class="even">
<td><code>{{hideDates}}</code></td>
<td><code>true</code> if you’ve chosen to hide the dates on your site, <code>false</code> if not</td>
</tr>
</tbody>
</table>
<h2 id="post-variables">Post variables</h2>
<p>Note that some of the variables, like <code>{{{html}}}</code> have three handlebars rather than two. <a href="https://mustache.github.io/">Mustache</a> escapes variables with two handlebars.</p>
<table>
<thead>
<tr class="header">
<th>The tag…</th>
<th>is replaced with…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>{{id}}</code></td>
<td>Number representing the entry’s unique ID</td>
</tr>
<tr class="even">
<td><code>{{date}}</code></td>
<td>Human readable publish date for the entry</td>
</tr>
<tr class="odd">
<td><code>{{title}}</code></td>
<td>Title of the entry</td>
</tr>
<tr class="even">
<td><code>{{{titleTag}}}</code></td>
<td>HTML of the entry’s title</td>
</tr>
<tr class="odd">
<td><code>{{{html}}}</code></td>
<td>HTML of the entry, including the title</td>
</tr>
<tr class="even">
<td><code>{{{body}}}</code></td>
<td>HTML of the entry, excluding the title</td>
</tr>
<tr class="odd">
<td><code>{{{teaser}}}</code></td>
<td>HTML of the title and the first few items in the entry. You can specify the end of the teaser by inserting the special tag <code>{{more}}</code> into your blog post’s file. Everything before <code>{{more}}</code> will be included in the teaser.</td>
</tr>
<tr class="even">
<td><code>{{{teaserBody}}}</code></td>
<td><code>{{{teaser}}}</code> without the title.</td>
</tr>
<tr class="odd">
<td><code>{{summary}}</code></td>
<td>Text summary of the entry</td>
</tr>
<tr class="even">
<td><code>{{more}}</code></td>
<td>Boolean indicating whether <code>teaser</code> differs from <code>html</code>. This is useful for determining whether or not to show ‘read more’ links.</td>
</tr>
<tr class="odd">
<td><code>{{tags}}</code></td>
<td>List of tags for the entry</td>
</tr>
<tr class="even">
<td><code>{{url}}</code></td>
<td>Relative URL to the entry</td>
</tr>
<tr class="odd">
<td><code>{{menu}}</code></td>
<td>“true” if the entry is a page, “false” if not</td>
</tr>
<tr class="even">
<td><code>{{created}}</code></td>
<td>Timestamp</td>
</tr>
<tr class="odd">
<td><code>{{updated}}</code></td>
<td>Timestamp</td>
</tr>
</tbody>
</table>
<h2 id="help-functions">Help functions</h2>
<p>encodeURIComponent</p>
<p>[[={{ }}=]]</p>
<p>{{=[[ ]]=}}</p>
<h2 id="lists">Lists</h2>
<p>You can uses these variables to render lists of posts</p>
<table>
<thead>
<tr class="header">
<th>The tag…</th>
<th>is replaced with…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>{{#all_posts}}...{{/all_posts}}</code></td>
<td>Every post ever published</td>
</tr>
<tr class="even">
<td><code>{{#recent_posts}}...{{/recent_posts}}</code></td>
<td>25 most recent posts on your site</td>
</tr>
<tr class="odd">
<td><code>{{#archives}}...{{/archives}}</code></td>
<td>your site’s title</td>
</tr>
<tr class="even">
<td><code>{{#all_tags}}...{{/all_tags}}</code></td>
<td>the URL to your site’s avatar</td>
</tr>
</tbody>
</table>
<p>[[={{ }}=]]</p>
<p>{{=[[ ]]=}}</p>
<h2 id="custom-metadata">Custom metadata</h2>
<p>You can specify custom entry metadata:</p>
<pre class="file"><code>Author: Eric Blair

# Homage to Catalonia

In the Lenin Barracks in Barcelona, the day before...</code></pre>
<p>Use custom metadata in your template like this:</p>
<pre><code>Posted by {{metadata.author}}</code></pre>
<p>Metadata keys are case insensitive. I’d recommend using conditional blocks to prevent your layout breaking if you don’t consistently specify metadata:</p>
<pre><code>{{#metadata.author}}
  Posted by {{metadata.author}}
{{/metadata.author}}

{{^metadata.author}}
  Posted by the editor
{{/metadata.author}}</code></pre>
<h2 id="thumbnails">Thumbnails</h2>
<p>Blot generates four sizes of thumbnails:</p>
<ul>
<li><strong>small</strong> which has a width and height under 160px.</li>
<li><strong>medium</strong> the default, which has a width under 640px.</li>
<li><strong>large</strong> which has a width and height under 1060px.</li>
<li><strong>square</strong> which has a width and height of 160px.</li>
</ul>
<p>Blot will not increase the size of smaller images. The JSON added to each entry looks something like this:</p>
<pre class="javascript"><code>{
    ...
    thumbnail: {
        small: {url: &quot;...&quot;, width: 160, height: 103},
        medium: {url: &quot;...&quot;, width: 640, height: 411},
        large: {url: &quot;...&quot;, width: 1060, height: 681},
        square: {url: &quot;...&quot;, width: 160, height: 160 }
    },
    ...
}</code></pre>
<p>You can use them in your template like this:</p>
<pre><code>{{#thumbnail.medium}}
    &lt;img src=&quot;{{url}}&quot; width=&quot;{{width}}&quot; height=&quot;{{height}}&quot;&gt;
{{/thumbnail.medium}}</code></pre>
<p>[[={{ }}=]]</p>
